{"ast":null,"code":"import axios from '../api/axiosInstance';\nimport { toast } from 'react-toastify';\nexport const handleAcquisto = async (tipo, id) => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    toast.error(\"Token mancante. Effettua il login.\");\n    return;\n  }\n  const payload = {\n    acquistiBean: {}\n  };\n  if (tipo === 'auto') payload.acquistiBean.extAutoId = id;else if (tipo === 'moto') payload.acquistiBean.extMotoId = id;else if (tipo === 'tir') payload.acquistiBean.extTirId = id;\n  try {\n    const res = await axios.post('/acquisti/insertAcquisto', payload, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    mostraToastConferma(\"Confermi l'acquisto di questo veicolo?\", async () => {\n      try {\n        const res = await axios.post(\"/acquisti/insertAcquisto\", payload, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = res.data;\n        if (data.errorCode === 0) {\n          toast.success(\"✅ Acquisto completato!\");\n        } else {\n          toast.error(`❌ ${data.errorMessage || \"Errore durante l'acquisto\"}`);\n        }\n      } catch (err) {\n        console.error(err);\n        toast.error(\"❌ Errore di rete durante l'acquisto\");\n      }\n    });\n  } catch (err) {\n    console.error(err);\n    toast.error(\"Errore durante l'acquisto.\");\n  }\n};","map":{"version":3,"names":["axios","toast","handleAcquisto","tipo","id","token","localStorage","getItem","error","payload","acquistiBean","extAutoId","extMotoId","extTirId","res","post","headers","Authorization","mostraToastConferma","data","errorCode","success","errorMessage","err","console"],"sources":["C:/Vroom/VroomERPFE/src/api/acquistoUtils.ts"],"sourcesContent":["import axios from '../api/axiosInstance';\r\nimport { toast } from 'react-toastify';\r\nimport MostraTastoCoferma from '../api/MostraTastoCoferma';\r\nexport const handleAcquisto = async (tipo: 'auto' | 'moto' | 'tir', id: number) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    toast.error(\"Token mancante. Effettua il login.\");\r\n    return;\r\n  }\r\n\r\n  const payload: any = { acquistiBean: {} };\r\n  if (tipo === 'auto') payload.acquistiBean.extAutoId = id;\r\n  else if (tipo === 'moto') payload.acquistiBean.extMotoId = id;\r\n  else if (tipo === 'tir') payload.acquistiBean.extTirId = id;\r\n\r\n  try {\r\n    const res = await axios.post('/acquisti/insertAcquisto', payload, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n\r\n    mostraToastConferma(\"Confermi l'acquisto di questo veicolo?\", async () => {\r\n        try {\r\n          const res = await axios.post(\"/acquisti/insertAcquisto\", payload, {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          });\r\n    \r\n          const data = res.data;\r\n          if (data.errorCode === 0) {\r\n            toast.success(\"✅ Acquisto completato!\");\r\n          } else {\r\n            toast.error(`❌ ${data.errorMessage || \"Errore durante l'acquisto\"}`);\r\n          }\r\n        } catch (err) {\r\n          console.error(err);\r\n          toast.error(\"❌ Errore di rete durante l'acquisto\");\r\n        }\r\n      });\r\n    \r\n  } catch (err) {\r\n    console.error(err);\r\n    toast.error(\"Errore durante l'acquisto.\");\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,sBAAsB;AACxC,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAOC,IAA6B,EAAEC,EAAU,KAAK;EACjF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE;IACVJ,KAAK,CAACO,KAAK,CAAC,oCAAoC,CAAC;IACjD;EACF;EAEA,MAAMC,OAAY,GAAG;IAAEC,YAAY,EAAE,CAAC;EAAE,CAAC;EACzC,IAAIP,IAAI,KAAK,MAAM,EAAEM,OAAO,CAACC,YAAY,CAACC,SAAS,GAAGP,EAAE,CAAC,KACpD,IAAID,IAAI,KAAK,MAAM,EAAEM,OAAO,CAACC,YAAY,CAACE,SAAS,GAAGR,EAAE,CAAC,KACzD,IAAID,IAAI,KAAK,KAAK,EAAEM,OAAO,CAACC,YAAY,CAACG,QAAQ,GAAGT,EAAE;EAE3D,IAAI;IACF,MAAMU,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,0BAA0B,EAAEN,OAAO,EAAE;MAChEO,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUZ,KAAK;MAChC;IACF,CAAC,CAAC;IAEFa,mBAAmB,CAAC,wCAAwC,EAAE,YAAY;MACtE,IAAI;QACF,MAAMJ,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,0BAA0B,EAAEN,OAAO,EAAE;UAChEO,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUZ,KAAK;UAChC;QACF,CAAC,CAAC;QAEF,MAAMc,IAAI,GAAGL,GAAG,CAACK,IAAI;QACrB,IAAIA,IAAI,CAACC,SAAS,KAAK,CAAC,EAAE;UACxBnB,KAAK,CAACoB,OAAO,CAAC,wBAAwB,CAAC;QACzC,CAAC,MAAM;UACLpB,KAAK,CAACO,KAAK,CAAC,KAAKW,IAAI,CAACG,YAAY,IAAI,2BAA2B,EAAE,CAAC;QACtE;MACF,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAAChB,KAAK,CAACe,GAAG,CAAC;QAClBtB,KAAK,CAACO,KAAK,CAAC,qCAAqC,CAAC;MACpD;IACF,CAAC,CAAC;EAEN,CAAC,CAAC,OAAOe,GAAG,EAAE;IACZC,OAAO,CAAChB,KAAK,CAACe,GAAG,CAAC;IAClBtB,KAAK,CAACO,KAAK,CAAC,4BAA4B,CAAC;EAC3C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}